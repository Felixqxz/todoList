{"ast":null,"code":"import _slicedToArray from \"/Users/qianxingzhi/Desktop/TodoWeb/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/qianxingzhi/Desktop/TodoWeb/frontend/src/components/todo/ListTodosComponent.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport TodoDataService from '../../api/todo/TodoDataService.js';\nimport AuthenticationService from './AuthenticationService.js';\nimport moment from 'moment';\nexport default function ListTodosComponent() {\n  var _useState = useState({\n    todos: [],\n    message: null\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      todoList = _useState2[0],\n      setTodoList = _useState2[1];\n\n  useEffect(function () {\n    refreshTodos();\n  }, [todoList]);\n\n  var refreshTodos = function refreshTodos() {\n    var username = AuthenticationService.getLoggedInUserName();\n    TodoDataService.retrieveAllTodos(username).then(function (response) {\n      setTodo({\n        todos: response.data\n      });\n    });\n  };\n\n  var deleteTodoClicked = function deleteTodoClicked(id) {\n    var username = AuthenticationService.getLoggedInUserName();\n    TodoDataService.deleteTodo(username, id).then(function (response) {\n      setState({\n        message: \"Delete of todo \".concat(id, \" Successful\")\n      });\n      refreshTodos();\n    });\n  };\n\n  var addTodoClicked = function addTodoClicked() {\n    props.history.push(\"/todos/-1\");\n  };\n\n  var updateTodoClicked = function updateTodoClicked(id) {\n    props.history.push(\"/todos/\".concat(id));\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, \"List Todos\"), todoList.message && React.createElement(\"div\", {\n    class: \"alert alert-success\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, todoList.message), React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(\"table\", {\n    className: \"table\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(\"thead\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, \"Description\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, \"Target Date\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, \"IsCompleted?\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \"Update\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, \"Delete\"))), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, todoList.todos.map(function (todo) {\n    return React.createElement(\"tr\", {\n      key: todo.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, todo.description), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, moment(todo.targetDate).format('YYYY-MM-DD')), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, todo.done.toString()), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-success\",\n      onClick: function onClick() {\n        return updateTodoClicked(todo.id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"Update\")), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-warning\",\n      onClick: function onClick() {\n        return deleteTodoClicked(todo.id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Delete\")));\n  }))), React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"btn btn-success\",\n    onClick: addTodoClicked,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"Add\"))));\n}","map":{"version":3,"sources":["/Users/qianxingzhi/Desktop/TodoWeb/frontend/src/components/todo/ListTodosComponent.jsx"],"names":["React","useState","useEffect","TodoDataService","AuthenticationService","moment","ListTodosComponent","todos","message","todoList","setTodoList","refreshTodos","username","getLoggedInUserName","retrieveAllTodos","then","response","setTodo","data","deleteTodoClicked","id","deleteTodo","setState","addTodoClicked","props","history","push","updateTodoClicked","map","todo","description","targetDate","format","done","toString"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport TodoDataService from '../../api/todo/TodoDataService.js'\nimport AuthenticationService from './AuthenticationService.js'\nimport moment from 'moment'\n\nexport default function ListTodosComponent() {\n    const [todoList, setTodoList] = useState({\n        todos: [],\n        message: null\n    });\n\n    useEffect(() => {\n        refreshTodos()\n    }, [todoList]);\n\n    const refreshTodos = () => {\n        let username = AuthenticationService.getLoggedInUserName()\n        TodoDataService.retrieveAllTodos(username)\n            .then(\n                response => {\n                    setTodo({ todos: response.data })\n                }\n            )\n    }\n\n    const deleteTodoClicked = (id) => {\n        let username = AuthenticationService.getLoggedInUserName()\n        TodoDataService.deleteTodo(username, id)\n            .then(\n                response => {\n                    setState({ message: `Delete of todo ${id} Successful` })\n                    refreshTodos()\n                }\n            )\n\n    }\n\n    const addTodoClicked = () => {\n        props.history.push(`/todos/-1`)\n    }\n\n    const updateTodoClicked = (id) => {\n        props.history.push(`/todos/${id}`)\n\n    }\n\n    return (\n        <div>\n            <h1>List Todos</h1>\n            {todoList.message && <div class=\"alert alert-success\">{todoList.message}</div>}\n            <div className=\"container\">\n                <table className=\"table\">\n                    <thead>\n                        <tr>\n                            <th>Description</th>\n                            <th>Target Date</th>\n                            <th>IsCompleted?</th>\n                            <th>Update</th>\n                            <th>Delete</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {\n                            todoList.todos.map(\n                                todo =>\n                                    <tr key={todo.id}>\n                                        <td>{todo.description}</td>\n                                        <td>{moment(todo.targetDate).format('YYYY-MM-DD')}</td>\n                                        <td>{todo.done.toString()}</td>\n                                        <td><button className=\"btn btn-success\" onClick={() => updateTodoClicked(todo.id)}>Update</button></td>\n                                        <td><button className=\"btn btn-warning\" onClick={() => deleteTodoClicked(todo.id)}>Delete</button></td>\n                                    </tr>\n                            )\n                        }\n                    </tbody>\n                </table>\n                <div className=\"row\">\n                    <button className=\"btn btn-success\" onClick={addTodoClicked}>Add</button>\n                </div>\n            </div>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}